@model SFA.DAS.EmployerAccounts.Web.OrchestratorResponse<SFA.DAS.EmployerAccounts.Web.ViewModels.AccountDashboardViewModel>

@{
    ViewBag.Title = "Home";
    ViewBag.PageID = "page-company-homepage";
}

<div class="das-dashboard-header das-section--header">
    <div class="govuk-width-container das-dashboard-header__border">
        <h1 class="govuk-heading-m das-account__title">Your employer account</h1>
        <h2 class="govuk-heading-l das-account__account-name">@Model.Data.Account.Name</h2>
    </div>
</div>

@if (Model.Data.ShowSearchBar)
{
    @Html.Action("SearchBar")
}

<main class="govuk-main-wrapper das-section--dashboard" id="main-content" role="main">
    <div class="govuk-width-container">
        <div class="das-panels">
            <div class="das-panels__col das-panels__col--primary">
                @Html.Action("Row1Panel1", new { model = Model.Data })
                @Html.Action("Row2Panel1", new { model = Model.Data })
            </div>
            <div class="das-panels__col das-panels__col--secondary">
                @Html.Action("Row1Panel2", new { model = Model.Data })
                @Html.Action("Row2Panel2", new { model = Model.Data })
            </div>
        </div>
    </div>

    @Html.Action("OtherTasksPanel", new {model = Model.Data})

</main>


@if (Model.Data.ShowMostActiveLinks)
{
    @Html.Action("MostActiveLinks", new { model = Model.Data });
}

@section pageSpecificJS {
<script>

    $(function () {

        var $link = $('#other-tasks-link'),
            $target = $('#das-dashbaord-other-tasks'),
            activeClass = 'das-dashboard-header__tasks-link--active';

        $link.on('click', function (e) {
            if ($link.hasClass(activeClass)) {
                $link.removeClass(activeClass);
                $target.hide()
            } else {
                $link.addClass(activeClass);
                $target.show();
            }
            e.preventDefault();
        });

        $link.on('keydown', function (e) {
            if (e.which === 9 && $link.hasClass(activeClass)) {
                $('.das-section__inner-wrap').focus();
            }
        });

    });

</script>
}